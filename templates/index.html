<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedTracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    
</head> 
<body>
    <h1 class="center">Medicine Tracker</h1>
    <p class="center">Welcome to your personal Medicine Tracker!</p><br>
    
    <div class="dashboard">
    <!--THIS WILL SHOW A PROGRESS BAR FOR MY MEDS -->
    <div class="todaysProgress">
        <h1>Today's Progress</h1>
        
        <p id="progress" data-total-meds="{{totalMeds}}"></p>
    </div>
    <!--THIS WILL SHOW TODAYS MEDICINE AND WILL ONLY SHOW MEDS THAT I NEED TAKE NOT PASSED OR HAVE TAKEN-->
    <div class="dosesToday">
        <h1>Doses Today</h1>
        <p id="noMedicine">No dose's scheduled for today</p>
        <p id="dosePercentage"></p>
        </div>
    
    <!--THIS IS WHERE I WILL CHECK OFF MY MEDS THAT I NEED TO TAKE-->
    <div class="todaysSchedule">
        <h1>Today's Schedule</h1>
        <!--MUST FIX THIS--> 
        <div class="todaysSchedule">
        {% for med in orderedMeds %}
                <div class="medicineItem">
                    <input type="checkbox" class="MedicineCheckBox" name="medicineCheck">
                    <strong><span class='medName'>{{ med.name }}</span></strong>
                     <p class='medDose'>Dosage: {{ med.dosage }} mg</p>
                     <p class='medTime'>Time: {{ med.time.strftime('%I:%M %p') if med.time else 'N/A' }}</p>
                    
                </div>
            {% else %}
                <p id="Schedule">No medications scheduled for today</p>
            {% endfor %}
            </div>
        
    </div>
    <!--THIS IS TO SHOW ALL MY MEDS AND ALLOWS ME TO EITHER ADD DELETE OR CHANGE-->
    <!--I would like to add a seach bar to look for a specific med-->
    <div id="yourMedicine">
        <h1>Your Medications</h1>
        <div class="yourMedicineList" id="medicineList">
            {% for med in medicines %}
                <div class="medicineItem">
                    <strong><span class='medName'>{{ med.name }}</span></strong> <a href="/delete/{{med.id}}" alt="Delete">
                    <img src="/static/icons/trash.svg" alt="Delete"></a>
                    <a href="/edit/{{med.id}}" alt="Edit">
                    <img src="/static/icons/edit.svg" alt="Edit"></a>
                     <p>Dosage: {{ med.dosage }} mg</p>
                     <p>Time: {{ med.time.strftime('%I:%M %p') if med.time else 'N/A' }}</p>
                    {%if med.comments%}
                        <p>Notes: {{med.notes}}</p>
                    {% endif %}
                    
                </div>
            {% else %}
                    <p id="noMedicine">No medications added yet</p>
            {% endfor %}
        </div>      

        <button onclick="showForm()" id="addMedicine">Add Medicine</button><br>

        <div id="MedicineDiv" style="display: none;">
            <form method="POST" class="medicineForm">
                <label for="medicineName">Medicine Name:</label><br>
                <input type="text" id="medicineName" name="medicineName"  required><br>

                <label for="medicineDose">Medicine Dose (mg):</label><br>
                <input type="number" id="medicineDose" name="medicineDose" required><br>

                <label for="Notes">Notes (Optinal)</label><br>
                <input type="text" id="Notes" name="Notes"><br>

                <label for="medicineFrequency">Frequency:</label><br>
                <select id="Frequency" name="Frequency">
                    <option value="once">Once a day</option>
                    <option value="twice">Twice a day</option>
                    <option value="three">Three times a day</option>
                    <option value="four">Four times a day</option>
                </select><br>

                <label for="timeForMedicine">Times to take:</label><br>
                <input type="time" id="timeToTake" name="timeToTake" required><br>
                
            <div class='actionBtn'>
                <input type="submit" value="Submit" id="submit" >
                <input type="button" value="Cancel" id="cancel" onclick="cancelMedicine()">
            </div>
            </form>
            
        </div>
    </div>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>